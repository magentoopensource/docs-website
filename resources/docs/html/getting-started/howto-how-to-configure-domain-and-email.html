
<h1 class="text-4xl font-bold text-charcoal mb-6">How to Configure Domain and Email</h1>

<div class="flex flex-wrap items-center gap-3 mb-8">
    <span class="inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium bg-orange-50 text-orange-700">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        60–120 minutes
    </span>
    <span class="inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium bg-yellow-50 text-brown">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
        </svg>
        Intermediate
    </span>
    <span class="inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium bg-orange-50 text-orange-700">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.99 1.99 0 013 12V7a4 4 0 014-4z"/>
        </svg>
        How-To
    </span>
</div>

<section class="bg-white mb-8 p-8 border-t-4 border-yellow-500 shadow-sm">
    <h2 class="text-2xl font-bold text-charcoal mb-4 mt-0">Overview</h2>

    <div class="bg-gray-50 border-l-4 border-yellow-500 p-6 mb-6">
        <h3 class="text-lg font-bold text-charcoal mb-3">Why This Matters</h3>
        <ul class="space-y-2 pl-6">
            <li class="relative hexagon-bullet pl-6 text-gray-700">Boost brand trust and SEO with a canonical HTTPS domain</li>
            <li class="relative hexagon-bullet pl-6 text-gray-700">Improve email deliverability and reduce missed order confirmations</li>
            <li class="relative hexagon-bullet pl-6 text-gray-700">Prevent duplicate content in search engines, protecting rankings</li>
            <li class="relative hexagon-bullet pl-6 text-gray-700">Reduce support tickets from failed email deliveries</li>
        </ul>
    </div>

    <p class="text-lg text-gray-700 leading-relaxed mb-6">
        Configure a custom domain and professional email to boost brand trust, SEO, and email deliverability. A canonical HTTPS domain prevents duplicate content in search, protecting rankings. Authenticated email (SPF/DKIM/DMARC) improves inbox placement, reducing support tickets from missed order emails.
    </p>

    <div class="mt-6">
        <p class="font-semibold text-charcoal mb-3">Track these KPIs to measure success:</p>
        <ul class="space-y-2 pl-6 mb-4">
            <li class="relative hexagon-bullet pl-6 text-gray-700">Order email delivery rate (target: ≥98%)</li>
            <li class="relative hexagon-bullet pl-6 text-gray-700">Order confirmation open rate (target: 60–80%)</li>
            <li class="relative hexagon-bullet pl-6 text-gray-700">Support tickets about missing emails (target: ↓50% after DMARC)</li>
            <li class="relative hexagon-bullet pl-6 text-gray-700">Organic sessions and CTR to canonical URLs</li>
            <li class="relative hexagon-bullet pl-6 text-gray-700">Single-hop 301 redirects to canonical HTTPS host</li>
        </ul>
    </div>

    <div class="bg-white border-4 border-yellow-500 p-4 mt-6 flex gap-4 items-start">
        <div class="flex-shrink-0 w-6 h-6">
            <svg class="w-full h-full text-orange-500" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"/>
            </svg>
        </div>
        <div class="flex-1">
            <p class="font-bold text-charcoal mb-1">Quick ROI Example</p>
            <p class="text-charcoal leading-relaxed">If you send 4,000 order emails/month and 3% fail today (120 emails), improving delivery to 98% saves ≈$108/month in support costs and preserves ≈$720/month in at-risk revenue (15% support touch rate at $6/ticket, 5% churn at $120 AOV).</p>
        </div>
    </div>
</section>

<section class="bg-white mb-8 p-8 border-t-4 border-yellow-500 shadow-sm">
    <h2 class="text-2xl font-bold text-charcoal mb-6 mt-0">Prerequisites</h2>
    <p class="text-gray-700 mb-6">Before you begin, make sure you have:</p>
    <div class="grid md:grid-cols-2 gap-4">
        <div class="relative bg-gradient-to-br from-orange-50 to-white border border-orange-500/30 p-5">
            <div class="flex items-start gap-4">
                <div class="w-10 h-10 bg-orange-500 flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
                    </svg>
                </div>
                <div>
                    <h4 class="font-semibold text-charcoal mb-1">Domain Registrar Access</h4>
                    <p class="text-sm text-charcoal/70">Access to your domain registrar or DNS provider</p>
                </div>
            </div>
        </div>
        <div class="relative bg-gradient-to-br from-yellow-50 to-white border border-yellow-500/30 p-5">
            <div class="flex items-start gap-4">
                <div class="w-10 h-10 bg-yellow-500 flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"/>
                    </svg>
                </div>
                <div>
                    <h4 class="font-semibold text-charcoal mb-1">Hosting Control Panel</h4>
                    <p class="text-sm text-charcoal/70">Access to your hosting control panel or server</p>
                </div>
            </div>
        </div>
        <div class="relative bg-gradient-to-br from-orange-50 to-white border border-orange-500/30 p-5">
            <div class="flex items-start gap-4">
                <div class="w-10 h-10 bg-orange-500 flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                    </svg>
                </div>
                <div>
                    <h4 class="font-semibold text-charcoal mb-1">Magento Admin Access</h4>
                    <p class="text-sm text-charcoal/70">Magento Admin credentials for configuration</p>
                </div>
            </div>
        </div>
        <div class="relative bg-gradient-to-br from-yellow-50 to-white border border-yellow-500/30 p-5">
            <div class="flex items-start gap-4">
                <div class="w-10 h-10 bg-yellow-500 flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                </div>
                <div>
                    <h4 class="font-semibold text-charcoal mb-1">SSH Access (Optional)</h4>
                    <p class="text-sm text-charcoal/70">For server/CLI tasks like Certbot and Magento CLI</p>
                </div>
            </div>
        </div>
    </div>

    <p class="text-gray-700 mt-6">
        <strong>Who should use this guide:</strong> Merchant administrators and technical managers can complete most steps. A developer or hosting provider may assist with server/CDN configuration.
    </p>
</section>

<section class="bg-white mb-8 p-8 border-t-4 border-yellow-500 shadow-sm">
    <h2 class="text-2xl font-bold text-charcoal mb-4 mt-0">What You'll Accomplish</h2>
    <p class="text-gray-700 mb-4">By following this guide, you will:</p>
    <ul class="space-y-3 pl-6">
        <li class="relative hexagon-bullet pl-6 text-gray-700">Configure your store's custom domain with proper DNS records</li>
        <li class="relative hexagon-bullet pl-6 text-gray-700">Implement secure HTTPS with TLS certificates and canonical redirects</li>
        <li class="relative hexagon-bullet pl-6 text-gray-700">Set up professional email with SPF, DKIM, and DMARC authentication</li>
        <li class="relative hexagon-bullet pl-6 text-gray-700">Configure Magento for optimal email deliverability</li>
        <li class="relative hexagon-bullet pl-6 text-gray-700">Improve your store's performance and customer experience</li>
    </ul>
</section>

<div class="bg-yellow-500 border-4 border-amber-600 p-4 mb-8 flex gap-3 items-start">
    <svg class="w-6 h-6 text-amber-700 flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 2L1 21h22L12 2zm0 3.99L19.53 19H4.47L12 5.99zM11 16h2v2h-2v-2zm0-6h2v4h-2v-4z"/>
    </svg>
    <div>
        <p class="font-bold text-brown mb-1">Quick Checklist for Experienced Users</p>
        <ul class="text-brown text-sm space-y-1 pl-4">
            <li>DNS: A/AAAA, CNAME (www), MX, TXT for SPF/DKIM/DMARC</li>
            <li>TLS/SSL: Issue and install certificates (or configure at CDN)</li>
            <li>Redirects: Force HTTPS and canonical host at edge (CDN/web server)</li>
            <li>Magento: Set Base URLs (secure), enable web server rewrites</li>
            <li>Email: ESP/SMTP module, store email identities, SPF/DKIM/DMARC, return-path</li>
            <li>Validation: DNS, redirects, TLS grade, email auth headers, delivery logs</li>
        </ul>
    </div>
</div>

<h2 class="text-3xl font-bold text-charcoal mb-8">Step-by-Step Instructions</h2>

<p class="text-gray-700 mb-6">This guide is divided into two themes to streamline your setup:</p>
<ul class="space-y-2 pl-6 mb-8">
    <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>Domain & HTTPS</strong> (Steps 1–5): Configure DNS, SSL/TLS, redirects, and Magento base URLs</li>
    <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>Email & Deliverability</strong> (Steps 6–10): Set up email authentication, sending method, and validation</li>
</ul>

<div class="border-t-4 border-yellow-500 bg-white shadow-sm p-8 mb-6">
    <div class="flex items-center gap-4 mb-6">
        <div class="w-10 h-10 bg-yellow-500 text-charcoal font-extrabold text-lg flex items-center justify-center flex-shrink-0">1</div>
        <h3 class="text-2xl font-bold text-charcoal m-0">Plan your canonical domain and email identities</h3>
    </div>
    <div class="text-gray-700 leading-relaxed">
        <p class="text-gray-700 leading-relaxed mb-4">
            Choose your canonical host to avoid rework later:
        </p>
        <ul class="space-y-3 pl-6 mb-4">
            <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>www.yourdomain.com</strong> – Recommended if you use a CDN or want maximum flexibility and cookie isolation</li>
            <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>yourdomain.com (apex)</strong> – Simpler if your DNS/CDN supports apex records (ALIAS/ANAME)</li>
        </ul>
        <p class="text-gray-700 leading-relaxed mb-4">
            List the professional email addresses you will use (e.g., support@yourdomain.com, orders@yourdomain.com). If you plan to use a transactional email provider (recommended), create your account now.
        </p>
        <div class="bg-white border-4 border-yellow-500 p-4 flex gap-3 items-start">
            <svg class="w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
            <p class="text-charcoal text-sm">Decide on canonical host (www vs apex) and delivery architecture (direct-to-origin vs CDN) first to reduce rework later. If using a CDN, you'll point DNS to the CDN and terminate TLS there in later steps.</p>
        </div>
    </div>
</div>

<div class="border-t-4 border-yellow-500 bg-white shadow-sm p-8 mb-6">
    <div class="flex items-center gap-4 mb-6">
        <div class="w-10 h-10 bg-yellow-500 text-charcoal font-extrabold text-lg flex items-center justify-center flex-shrink-0">2</div>
        <h3 class="text-2xl font-bold text-charcoal m-0">Create DNS records for your website</h3>
    </div>
    <div class="text-gray-700 leading-relaxed">
        <p class="text-gray-700 leading-relaxed mb-4">
            In your DNS provider, create the following records:
        </p>
        <ul class="space-y-3 pl-6 mb-4">
            <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>A record (apex):</strong> Host/Name = @ (or yourdomain.com), Value = your IPv4 address, TTL = 300</li>
            <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>AAAA record (IPv6, optional):</strong> Host/Name = @ (or yourdomain.com), Value = your IPv6 address</li>
            <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>CNAME (www):</strong> Host/Name = www, Value = yourdomain.com (do not create CNAME at apex)</li>
        </ul>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-2">DNS UI Tips:</p>
            <ul class="space-y-2 pl-6">
                <li class="relative hexagon-bullet pl-6 text-gray-700">Host/Name "@" represents the apex (yourdomain.com)</li>
                <li class="relative hexagon-bullet pl-6 text-gray-700">Most DNS UIs do not require trailing dots (enter yourdomain.com, not yourdomain.com.)</li>
                <li class="relative hexagon-bullet pl-6 text-gray-700">Always enter full hostnames for targets, not "@"</li>
            </ul>
        </div>

        <div class="bg-yellow-500 border-4 border-amber-600 p-4 mb-4 flex gap-3 items-start">
            <svg class="w-6 h-6 text-amber-700 flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L1 21h22L12 2zm0 3.99L19.53 19H4.47L12 5.99zM11 16h2v2h-2v-2zm0-6h2v4h-2v-4z"/>
            </svg>
            <div>
                <p class="font-bold text-brown mb-1">CDN Variant</p>
                <p class="text-brown text-sm">If using a CDN, point DNS to the CDN per provider docs (ALIAS/ANAME for apex, CNAME for www). Enable proxying on web traffic records. Validate CDN health checks before switching traffic. Only cut over DNS after TLS is ready at the CDN.</p>
            </div>
        </div>

        <div class="bg-white border-4 border-yellow-500 p-4 mb-4 flex gap-3 items-start">
            <svg class="w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"/>
            </svg>
            <div class="text-charcoal text-sm">
                <p class="font-bold mb-1">Cutover Planning (Minimize Downtime)</p>
                <ul class="space-y-1 pl-4">
                    <li>Lower TTL to 300 seconds 24–48 hours before changes</li>
                    <li>Pre-provision TLS and verify with hosts-file test if possible</li>
                    <li>Schedule DNS changes in low-traffic window</li>
                    <li>Prepare quick rollback plan (restore DNS, disable new redirects)</li>
                </ul>
            </div>
        </div>

        <p class="text-gray-700 leading-relaxed mb-4">
            Save changes and wait for DNS propagation (5–30 minutes, sometimes longer). Test with <code class="step-code">dig +short A yourdomain.com</code> or <code class="step-code">nslookup yourdomain.com</code> on Windows.
        </p>
        <p class="text-gray-700 leading-relaxed">
            If you need to receive email at your domain (e.g., support@yourdomain.com), you will add MX records for your mailbox provider in Step 7.
        </p>
    </div>
</div>

<div class="border-t-4 border-yellow-500 bg-white shadow-sm p-8 mb-6">
    <div class="flex items-center gap-4 mb-6">
        <div class="w-10 h-10 bg-yellow-500 text-charcoal font-extrabold text-lg flex items-center justify-center flex-shrink-0">3</div>
        <h3 class="text-2xl font-bold text-charcoal m-0">Provision and install an SSL/TLS certificate</h3>
    </div>
    <div class="text-gray-700 leading-relaxed">
        <p class="text-gray-700 leading-relaxed mb-4">Choose one approach:</p>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">Option A: Hosting Control Panel</p>
            <p class="text-gray-700 mb-2">Enable a free SSL option (e.g., Let's Encrypt) for both yourdomain.com and www.yourdomain.com.</p>
        </div>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">Option B: Server with Certbot</p>
            <ol class="space-y-2 list-none pl-0">
                <li class="relative pl-7 py-1 text-gray-700">
                    <span class="absolute left-0 top-1 font-semibold text-charcoal">1.</span>
                    Install certbot per your OS
                </li>
                <li class="relative pl-7 py-1 text-gray-700">
                    <span class="absolute left-0 top-1 font-semibold text-charcoal">2.</span>
                    For Nginx: <code class="step-code">sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com</code>
                </li>
                <li class="relative pl-7 py-1 text-gray-700">
                    <span class="absolute left-0 top-1 font-semibold text-charcoal">3.</span>
                    For Apache: <code class="step-code">sudo certbot --apache -d yourdomain.com -d www.yourdomain.com</code>
                </li>
                <li class="relative pl-7 py-1 text-gray-700">
                    <span class="absolute left-0 top-1 font-semibold text-charcoal">4.</span>
                    Test renewal: <code class="step-code">sudo certbot renew --dry-run</code>
                </li>
            </ol>
        </div>

        <div class="bg-white border-4 border-yellow-500 p-4 mb-4 flex gap-3 items-start">
            <svg class="w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
            <p class="text-charcoal text-sm">HTTP-01 challenges require inbound port 80 accessible from public internet. If blocked, use DNS-01 validation with your DNS provider's API to automate issuance.</p>
        </div>

        <div class="bg-yellow-500 border-4 border-amber-600 p-4 mb-4 flex gap-3 items-start">
            <svg class="w-6 h-6 text-amber-700 flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L1 21h22L12 2zm0 3.99L19.53 19H4.47L12 5.99zM11 16h2v2h-2v-2zm0-6h2v4h-2v-4z"/>
            </svg>
            <div>
                <p class="font-bold text-brown mb-1">Cloudflare-Specific Configuration</p>
                <p class="text-brown text-sm">Set SSL/TLS mode to <strong>Full (Strict)</strong>. Do not use Flexible—it causes HTTP at origin and breaks secure policies. Install a publicly trusted cert (e.g., Let's Encrypt) or Cloudflare Origin Certificate on your server before enabling Full (Strict).</p>
            </div>
        </div>

        <p class="text-gray-700 leading-relaxed mb-4">
            If using a CDN (e.g., Fastly, Cloudflare): Terminate TLS at the CDN and upload/manage certificates there. After confirming site-wide HTTPS is working, consider enabling HSTS (e.g., max-age=31536000; includeSubDomains; preload) at the CDN or server.
        </p>

        <div class="bg-orange-50 border-4 border-orange-500 p-4 flex gap-3 items-start">
            <svg class="w-6 h-6 text-orange-500 flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L1 21h22L12 2zm0 3.99L19.53 19H4.47L12 5.99zM11 16h2v2h-2v-2zm0-6h2v4h-2v-4z"/>
            </svg>
            <div>
                <p class="font-bold text-charcoal mb-1">HSTS/Preload Caution</p>
                <p class="text-charcoal text-sm">Enable HSTS preload only after confirming stable HTTPS across all subdomains. Preload is hard to roll back and can cause site inaccessibility if misconfigured. Submit to hstspreload.org only after thorough verification.</p>
            </div>
        </div>
    </div>
</div>

<div class="border-t-4 border-yellow-500 bg-white shadow-sm p-8 mb-6">
    <div class="flex items-center gap-4 mb-6">
        <div class="w-10 h-10 bg-yellow-500 text-charcoal font-extrabold text-lg flex items-center justify-center flex-shrink-0">4</div>
        <h3 class="text-2xl font-bold text-charcoal m-0">Set canonical redirects at the web server or hosting panel</h3>
    </div>
    <div class="text-gray-700 leading-relaxed">
        <p class="text-gray-700 leading-relaxed mb-4">
            Enable a 301 redirect to your canonical host and HTTPS in your hosting panel/CDN (often called "Force WWW/Non-WWW" and "Force HTTPS"). If editing configuration files:
        </p>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">Nginx Example (www canonical):</p>
            <pre class="bg-charcoal text-yellow-500 p-4 overflow-x-auto text-sm font-mono">server {
    listen 80;
    server_name yourdomain.com;
    return 301 https://www.yourdomain.com$request_uri;
}

# Also redirect HTTPS requests for the non-canonical host
server {
    listen 443 ssl http2;
    server_name yourdomain.com;
    ssl_certificate /path/to/fullchain.pem;
    ssl_certificate_key /path/to/privkey.pem;
    return 301 https://www.yourdomain.com$request_uri;
}</pre>
        </div>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">Apache Example (non-www canonical):</p>
            <pre class="bg-charcoal text-yellow-500 p-4 overflow-x-auto text-sm font-mono">RewriteEngine On
# Redirect www to non-www
RewriteCond %{HTTP_HOST} ^www\.yourdomain\.com$ [NC]
RewriteRule ^(.*)$ https://yourdomain.com/$1 [L,R=301]
# Force HTTPS (supports proxies)
RewriteCond %{HTTPS} !=on [OR]
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [L,R=301]</pre>
        </div>

        <div class="bg-white border-4 border-yellow-500 p-4 flex gap-3 items-start">
            <svg class="w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"/>
            </svg>
            <p class="text-charcoal text-sm"><strong>Important:</strong> Handle canonical and HTTPS redirects at the edge (CDN/web server) to avoid double redirects. A single 301 hop improves crawl efficiency, preserves link equity (SEO), and reduces page load time. Set Magento's "Auto-redirect to Base URL" to No in Step 5 unless you cannot control redirects at the edge.</p>
        </div>
    </div>
</div>

<div class="border-t-4 border-yellow-500 bg-white shadow-sm p-8 mb-6">
    <div class="flex items-center gap-4 mb-6">
        <div class="w-10 h-10 bg-yellow-500 text-charcoal font-extrabold text-lg flex items-center justify-center flex-shrink-0">5</div>
        <h3 class="text-2xl font-bold text-charcoal m-0">Update Magento Base URLs to HTTPS and canonical domain</h3>
    </div>
    <div class="text-gray-700 leading-relaxed">
        <p class="text-gray-700 leading-relaxed mb-4">In Magento Admin:</p>

        <ol class="space-y-4 list-none pl-0 mb-4">
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">1.</span>
                Go to <span class="step-code">Stores › Settings › Configuration › General › Web</span>
            </li>
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">2.</span>
                In the scope switcher (upper-left), select the Website you want to configure. If you run different domains per store view, switch to Store View scope and set Base URLs there.
            </li>
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">3.</span>
                Under <strong>Base URLs</strong>, set Base URL to <code class="step-code">https://yourdomain.com/</code> (match your canonical)
            </li>
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">4.</span>
                Under <strong>Base URLs (Secure)</strong>, set Base URL (Secure) to the same HTTPS URL. Enable "Use Secure URLs on Storefront" and "Use Secure URLs in Admin"
            </li>
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">5.</span>
                Under <strong>URL Options</strong>, set Auto-redirect to Base URL = No (recommended when redirects handled at CDN/web server)
            </li>
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">6.</span>
                Under <strong>Search Engine Optimization</strong>, set Use Web Server Rewrites = Yes (removes index.php from URLs)
            </li>
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">7.</span>
                <strong>Default Cookie Settings:</strong> Go to <span class="step-code">General › Web › Default Cookie Settings</span>
                <ul class="space-y-2 pl-6 mt-2">
                    <li class="relative hexagon-bullet pl-6 text-gray-700">Cookie Domain: .yourdomain.com (for subdomain sharing) or leave blank</li>
                    <li class="relative hexagon-bullet pl-6 text-gray-700">Use HTTP Only: Yes</li>
                    <li class="relative hexagon-bullet pl-6 text-gray-700">Use Secure Cookies: Yes (after HTTPS works end-to-end)</li>
                </ul>
            </li>
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">8.</span>
                Click Save Config, then <span class="step-code">System › Tools › Cache Management › Flush Magento Cache</span>
            </li>
        </ol>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">Recovery if Locked Out Due to Incorrect Base URL:</p>
            <p class="text-gray-700 mb-2">CLI recovery (default scope):</p>
            <pre class="bg-charcoal text-yellow-500 p-4 overflow-x-auto text-sm font-mono mb-3">bin/magento setup:store-config:set --base-url="https://yourdomain.com/" \
    --base-url-secure="https://yourdomain.com/" --use-secure=1 --use-secure-admin=1
bin/magento cache:flush</pre>

            <p class="text-gray-700 mb-2">CLI recovery (per-website scope):</p>
            <pre class="bg-charcoal text-yellow-500 p-4 overflow-x-auto text-sm font-mono">bin/magento config:set web/unsecure/base_url "https://yourdomain.com/" \
    --scope=websites --scope-code=YOUR_WEBSITE_CODE
bin/magento config:set web/secure/base_url "https://yourdomain.com/" \
    --scope=websites --scope-code=YOUR_WEBSITE_CODE
bin/magento cache:flush</pre>
        </div>

        <div class="bg-white border-4 border-yellow-500 p-4 flex gap-3 items-start">
            <svg class="w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
            <p class="text-charcoal text-sm">If using a CDN for static/media files, configure Base URL for Static View Files and Base URL for User Media Files separately. Enable signing for cache-busting. See source markdown for detailed CDN configuration steps.</p>
        </div>
    </div>
</div>

<div class="border-t-4 border-yellow-500 bg-white shadow-sm p-8 mb-6">
    <div class="flex items-center gap-4 mb-6">
        <div class="w-10 h-10 bg-yellow-500 text-charcoal font-extrabold text-lg flex items-center justify-center flex-shrink-0">6</div>
        <h3 class="text-2xl font-bold text-charcoal m-0">Set store email identities in Magento</h3>
    </div>
    <div class="text-gray-700 leading-relaxed">
        <p class="text-gray-700 leading-relaxed mb-4">In Magento Admin:</p>

        <ol class="space-y-4 list-none pl-0 mb-4">
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">1.</span>
                Go to <span class="step-code">Stores › Settings › Configuration › General › Store Email Addresses</span>
            </li>
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">2.</span>
                For each identity (General Contact, Sales Representative, Customer Support, Custom Emails), set:
                <ul class="space-y-2 pl-6 mt-2">
                    <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>Sender Name:</strong> Your brand name</li>
                    <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>Sender Email:</strong> Professional address (e.g., support@yourdomain.com)</li>
                </ul>
            </li>
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">3.</span>
                Go to <span class="step-code">General › Contacts</span>. Set Enable Contact Us = Yes, Send Emails To = your support address, Email Sender = appropriate identity
            </li>
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">4.</span>
                Click Save Config
            </li>
        </ol>

        <div class="bg-white border-4 border-yellow-500 p-4 flex gap-3 items-start">
            <svg class="w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
            <p class="text-charcoal text-sm">Use the Store View scope switcher to configure different Sender Name and Sender Email for each store view that has a different brand or domain.</p>
        </div>
    </div>
</div>

<div class="border-t-4 border-yellow-500 bg-white shadow-sm p-8 mb-6">
    <div class="flex items-center gap-4 mb-6">
        <div class="w-10 h-10 bg-yellow-500 text-charcoal font-extrabold text-lg flex items-center justify-center flex-shrink-0">7</div>
        <h3 class="text-2xl font-bold text-charcoal m-0">Configure SPF, DKIM, DMARC (and MX) for your domain</h3>
    </div>
    <div class="text-gray-700 leading-relaxed">
        <p class="text-gray-700 leading-relaxed mb-4">In your DNS provider:</p>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">MX Records (Inbound Email):</p>
            <p class="text-gray-700 mb-2">Add MX records for your mailbox provider (e.g., Google Workspace, Microsoft 365).</p>
            <p class="text-gray-700 text-sm">Example (Google Workspace): Host/Name = @, Value = ASPMX.L.GOOGLE.COM., Priority = 1 (plus additional MX hosts per provider docs)</p>
        </div>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">SPF Record (Single TXT Record at Root):</p>
            <pre class="bg-charcoal text-yellow-500 p-4 overflow-x-auto text-sm font-mono mb-3">v=spf1 include:YOUR_EMAIL_PROVIDER include:YOUR_ESP -all</pre>
            <p class="text-gray-700 mb-2"><strong>Examples:</strong></p>
            <ul class="space-y-1 text-sm pl-6">
                <li class="relative hexagon-bullet pl-6 text-gray-700">Google Workspace only: <code class="step-code">v=spf1 include:_spf.google.com -all</code></li>
                <li class="relative hexagon-bullet pl-6 text-gray-700">Microsoft 365 only: <code class="step-code">v=spf1 include:spf.protection.outlook.com -all</code></li>
                <li class="relative hexagon-bullet pl-6 text-gray-700">Google + SendGrid: <code class="step-code">v=spf1 include:_spf.google.com include:sendgrid.net -all</code></li>
            </ul>
            <p class="text-gray-700 text-sm mt-2">Only include providers you actively use. Keep total DNS lookups ≤10 across all includes.</p>
        </div>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">DKIM Records:</p>
            <p class="text-gray-700">Add TXT or CNAME records provided by your email/ESP (e.g., s1._domainkey.yourdomain.com) exactly as instructed by your provider.</p>
        </div>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">DMARC Record (TXT at _dmarc.yourdomain.com):</p>
            <pre class="bg-charcoal text-yellow-500 p-4 overflow-x-auto text-sm font-mono mb-3">v=DMARC1; p=none; rua=mailto:dmarc@yourdomain.com; \
ruf=mailto:dmarc-forensic@yourdomain.com; adkim=s; aspf=s; fo=1; pct=100</pre>
            <p class="text-gray-700 text-sm">Start with p=none for monitoring. After 1–2 weeks of clean reports, tighten to p=quarantine or p=reject to block phishing attempts.</p>
        </div>

        <div class="bg-white border-4 border-yellow-500 p-4 mb-4 flex gap-3 items-start">
            <svg class="w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"/>
            </svg>
            <div class="text-charcoal text-sm">
                <p class="font-bold mb-1">Alignment & Reputation Tips</p>
                <ul class="space-y-1 pl-4">
                    <li>Ensure From address domain matches authenticated domain for DMARC alignment</li>
                    <li>Consider subdomain for marketing (m.yourdomain.com) to isolate reputation</li>
                    <li>Add domain to Google Postmaster Tools to monitor reputation</li>
                    <li>Configure custom Return-Path/bounce domain with your ESP</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="border-t-4 border-yellow-500 bg-white shadow-sm p-8 mb-6">
    <div class="flex items-center gap-4 mb-6">
        <div class="w-10 h-10 bg-yellow-500 text-charcoal font-extrabold text-lg flex items-center justify-center flex-shrink-0">8</div>
        <h3 class="text-2xl font-bold text-charcoal m-0">Choose and configure your email sending method</h3>
    </div>
    <div class="text-gray-700 leading-relaxed">
        <p class="text-gray-700 leading-relaxed mb-4">
            <strong>Recommended (best deliverability):</strong> Use an ESP (e.g., SendGrid, Mailgun, Amazon SES) with a Magento integration.
        </p>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">Install ESP Integration via Composer:</p>
            <pre class="bg-charcoal text-yellow-500 p-4 overflow-x-auto text-sm font-mono mb-3">composer require mageplaza/module-smtp
bin/magento module:enable Mageplaza_Smtp
bin/magento setup:upgrade
bin/magento cache:flush</pre>
            <p class="text-gray-700 mb-2">Then configure at <span class="step-code">Stores › Configuration › Mageplaza Extensions › SMTP</span></p>
        </div>

        <div class="bg-white border-4 border-yellow-500 p-4 mb-4 flex gap-3 items-start">
            <svg class="w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
            <p class="text-charcoal text-sm">Set host and port per your ESP: typically port 587 with STARTTLS (TLS) or port 465 with SSL. Use the module's Test feature to verify connectivity. Ensure only one SMTP/ESP module is enabled at a time to avoid transport conflicts.</p>
        </div>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">ESP Selection Guidance (Tied to Outcomes):</p>
            <ul class="space-y-2 pl-6">
                <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>Volume &lt; 50k/month:</strong> Shared IP on reputable ESP (fast start, no warm-up)</li>
                <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>Volume 50k–300k/month:</strong> Dedicated IP(s) with 2–3 week warm-up; strong deliverability tooling</li>
                <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>Volume &gt; 300k/month:</strong> Dedicated IP pool + subdomain segmentation; SLAs and account support</li>
                <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>Typical cost:</strong> ~$0.10–$1.50 per 1,000 emails depending on tier and features</li>
            </ul>
        </div>

        <div class="bg-yellow-500 border-4 border-amber-600 p-4 mb-4 flex gap-3 items-start">
            <svg class="w-6 h-6 text-amber-700 flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L1 21h22L12 2zm0 3.99L19.53 19H4.47L12 5.99zM11 16h2v2h-2v-2zm0-6h2v4h-2v-4z"/>
            </svg>
            <div>
                <p class="font-bold text-brown mb-1">Dedicated IP Warm-up (If Applicable)</p>
                <p class="text-brown text-sm">Ramp volume gradually over 2–3 weeks, starting with engaged recipients (recent purchasers, frequent openers). Example: 2k/day → 5k/day → 10k/day → 20k+/day. Monitor ESP dashboards for blocks, spam complaints, bounce rate. Slow the ramp if rates spike.</p>
            </div>
        </div>

        <div class="bg-orange-50 border-4 border-orange-500 p-4 flex gap-3 items-start">
            <svg class="w-6 h-6 text-orange-500 flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L1 21h22L12 2zm0 3.99L19.53 19H4.47L12 5.99zM11 16h2v2h-2v-2zm0-6h2v4h-2v-4z"/>
            </svg>
            <div>
                <p class="font-bold text-charcoal mb-1">Not Recommended for Production</p>
                <p class="text-charcoal text-sm">Host-provided SMTP. Many hosts block outbound SMTP or have poor IP reputation, harming deliverability and DMARC alignment. If you must use it temporarily, verify outbound mail is permitted and obtain SMTP credentials from your host.</p>
            </div>
        </div>
    </div>
</div>

<div class="border-t-4 border-yellow-500 bg-white shadow-sm p-8 mb-6">
    <div class="flex items-center gap-4 mb-6">
        <div class="w-10 h-10 bg-yellow-500 text-charcoal font-extrabold text-lg flex items-center justify-center flex-shrink-0">9</div>
        <h3 class="text-2xl font-bold text-charcoal m-0">Enable and test Magento transactional emails</h3>
    </div>
    <div class="text-gray-700 leading-relaxed">
        <p class="text-gray-700 leading-relaxed mb-4">In Magento Admin:</p>

        <ol class="space-y-4 list-none pl-0 mb-4">
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">1.</span>
                Go to <span class="step-code">Stores › Configuration › Advanced › System › Mail Sending Settings</span>
                <ul class="space-y-2 pl-6 mt-2">
                    <li class="relative hexagon-bullet pl-6 text-gray-700">Set "Disable Email Communications" = No</li>
                    <li class="relative hexagon-bullet pl-6 text-gray-700">Set "Set Return Path" = Specified</li>
                    <li class="relative hexagon-bullet pl-6 text-gray-700">Set "Return-Path Email" = bounce-capable address from ESP (e.g., bounce@yourdomain.com)</li>
                </ul>
            </li>
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">2.</span>
                Go to <span class="step-code">Stores › Configuration › Sales › Sales Emails</span>
                <ul class="space-y-2 pl-6 mt-2">
                    <li class="relative hexagon-bullet pl-6 text-gray-700">Ensure emails enabled for Orders, Invoices, Shipments, Credit Memos</li>
                    <li class="relative hexagon-bullet pl-6 text-gray-700">Set Email Sender to appropriate Store Email Identity</li>
                    <li class="relative hexagon-bullet pl-6 text-gray-700">Under General Settings, set Asynchronous Sending = Yes (recommended)</li>
                </ul>
            </li>
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">3.</span>
                Ensure Magento cron is running (emails won't send otherwise)
                <ul class="space-y-2 pl-6 mt-2">
                    <li class="relative hexagon-bullet pl-6 text-gray-700">Verify cron: <code class="step-code">crontab -u &lt;magento_user&gt; -l</code></li>
                    <li class="relative hexagon-bullet pl-6 text-gray-700">If not installed: <code class="step-code">bin/magento cron:install</code></li>
                    <li class="relative hexagon-bullet pl-6 text-gray-700">Check last run times in var/log/cron.log and system.log</li>
                </ul>
            </li>
            <li class="relative pl-10">
                <span class="absolute left-0 top-0 font-semibold text-charcoal">4.</span>
                Test: Place a small test order or use Contact Us form. Verify From address, brand name, and successful delivery to your inbox.
            </li>
        </ol>
    </div>
</div>

<div class="border-t-4 border-yellow-500 bg-white shadow-sm p-8 mb-6">
    <div class="flex items-center gap-4 mb-6">
        <div class="w-10 h-10 bg-yellow-500 text-charcoal font-extrabold text-lg flex items-center justify-center flex-shrink-0">10</div>
        <h3 class="text-2xl font-bold text-charcoal m-0">Validate DNS, redirects, and authentication</h3>
    </div>
    <div class="text-gray-700 leading-relaxed">
        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">Check DNS (Unix/macOS):</p>
            <pre class="bg-charcoal text-yellow-500 p-4 overflow-x-auto text-sm font-mono">dig +short A yourdomain.com
dig +short CNAME www.yourdomain.com
dig +short TXT _dmarc.yourdomain.com</pre>
        </div>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">Check DNS (Windows):</p>
            <pre class="bg-charcoal text-yellow-500 p-4 overflow-x-auto text-sm font-mono">nslookup -type=A yourdomain.com
nslookup -type=CNAME www.yourdomain.com
nslookup -type=TXT _dmarc.yourdomain.com</pre>
        </div>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">Confirm Redirects:</p>
            <ul class="space-y-2 pl-6">
                <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>Browser test:</strong> Visit http://yourdomain.com and http://www.yourdomain.com — verify single 301 to canonical HTTPS</li>
                <li class="relative hexagon-bullet pl-6 text-gray-700"><strong>CLI test:</strong> <code class="step-code">curl -I http://yourdomain.com</code> — should see single 301 to https://&lt;canonical-host&gt;/</li>
            </ul>
        </div>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">Validate TLS:</p>
            <ul class="space-y-2 pl-6">
                <li class="relative hexagon-bullet pl-6 text-gray-700">Test at <a href="https://www.ssllabs.com/ssltest/" class="text-orange-500 hover:underline">SSL Labs</a> and aim for A grade</li>
                <li class="relative hexagon-bullet pl-6 text-gray-700">Ensure only TLS 1.2/1.3 enabled and weak ciphers disabled</li>
            </ul>
        </div>

        <div class="bg-gray-50 p-4 mb-4">
            <p class="font-semibold text-charcoal mb-3">Email Authentication:</p>
            <ul class="space-y-2 pl-6">
                <li class="relative hexagon-bullet pl-6 text-gray-700">Open headers of received test email and confirm SPF=PASS, DKIM=PASS, DMARC=PASS</li>
                <li class="relative hexagon-bullet pl-6 text-gray-700">Gmail: More (⋮) › Show original. Outlook: File › Properties › Internet headers</li>
                <li class="relative hexagon-bullet pl-6 text-gray-700">ESP validation: Confirm test messages show Delivered (250 OK) in ESP dashboard</li>
            </ul>
        </div>

        <p class="text-gray-700 leading-relaxed">
            In Magento, clear caches after any changes: <span class="step-code">System › Tools › Cache Management › Flush Magento Cache</span>
        </p>
    </div>
</div>

<h2 class="text-3xl font-bold text-charcoal mb-6">Verification</h2>
<p class="text-gray-700 mb-6">Use this checklist to confirm everything is working correctly:</p>

<ul class="list-none my-8 pl-0 space-y-5">
    <li class="bg-white p-7 shadow-sm">
        <div class="flex items-center justify-between mb-5">
            <strong class="text-lg font-bold text-charcoal">DNS Configuration</strong>
        </div>
        <ul class="grid gap-3 m-0 p-0 list-none">
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Apex and www records point to origin or CDN as designed
            </li>
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                MX, SPF, DKIM, DMARC records valid and propagated
            </li>
        </ul>
    </li>

    <li class="bg-white p-7 shadow-sm">
        <div class="flex items-center justify-between mb-5">
            <strong class="text-lg font-bold text-charcoal">TLS/SSL & Redirects</strong>
        </div>
        <ul class="grid gap-3 m-0 p-0 list-none">
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Valid certs (A grade on SSL Labs); HSTS considered after verification
            </li>
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Single 301 hop to canonical HTTPS host from all entry points
            </li>
        </ul>
    </li>

    <li class="bg-white p-7 shadow-sm">
        <div class="flex items-center justify-between mb-5">
            <strong class="text-lg font-bold text-charcoal">Magento Configuration</strong>
        </div>
        <ul class="grid gap-3 m-0 p-0 list-none">
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Base URLs (secure) set at correct scope
            </li>
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Web Server Rewrites enabled; cookies configured
            </li>
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Caches flushed after configuration changes
            </li>
        </ul>
    </li>

    <li class="bg-white p-7 shadow-sm">
        <div class="flex items-center justify-between mb-5">
            <strong class="text-lg font-bold text-charcoal">Email Configuration</strong>
        </div>
        <ul class="grid gap-3 m-0 p-0 list-none">
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Store Email Identities set with professional addresses
            </li>
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                SMTP/ESP module configured (only one enabled)
            </li>
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Return-Path set and verified with ESP
            </li>
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Asynchronous Sending enabled; cron operational
            </li>
        </ul>
    </li>

    <li class="bg-white p-7 shadow-sm">
        <div class="flex items-center justify-between mb-5">
            <strong class="text-lg font-bold text-charcoal">Email Authentication & Delivery</strong>
        </div>
        <ul class="grid gap-3 m-0 p-0 list-none">
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Test emails show SPF=PASS, DKIM=PASS, DMARC=PASS in headers
            </li>
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                ESP dashboard shows Delivered (250 OK)
            </li>
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Bounces and complaints processed by feedback loops
            </li>
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Dedicated IP warm-up plan executed (if applicable)
            </li>
        </ul>
    </li>

    <li class="bg-white p-7 shadow-sm">
        <div class="flex items-center justify-between mb-5">
            <strong class="text-lg font-bold text-charcoal">Go-Live & SEO Follow-up</strong>
        </div>
        <ul class="grid gap-3 m-0 p-0 list-none">
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Sitemaps updated and submitted to Search Console/Bing
            </li>
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Search Console properties verified for canonical domain
            </li>
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Top 50 landing URLs tested for single-hop redirects
            </li>
            <li class="flex items-start gap-3 p-3 pl-10 bg-gray-50 hover:bg-orange-50 transition-colors relative">
                <span class="absolute left-3 top-3 w-5 h-5 border-2 border-yellow-500 flex items-center justify-center text-yellow-500 font-bold text-sm">✓</span>
                Robots.txt set to INDEX, FOLLOW for production
            </li>
        </ul>
    </li>
</ul>

<div class="bg-white border-4 border-yellow-500 p-6 mb-8">
    <p class="font-bold text-charcoal mb-3">Business Signoff Criteria:</p>
    <ul class="space-y-2 pl-6">
        <li class="relative hexagon-bullet pl-6 text-gray-700">Delivery rate ≥98% (ESP dashboard)</li>
        <li class="relative hexagon-bullet pl-6 text-gray-700">Order/shipment open rate ≥60%</li>
        <li class="relative hexagon-bullet pl-6 text-gray-700">Support tickets about missing emails ↓≥50% vs baseline</li>
        <li class="relative hexagon-bullet pl-6 text-gray-700">Organic CTR to canonical URLs ↑ vs baseline</li>
    </ul>
</div>

<h2 class="text-3xl font-bold text-charcoal mb-6">Common Issues and Solutions</h2>

<div class="space-y-4 my-8">
    <div class="bg-white shadow-md overflow-hidden border-t-4 border-orange-500">
        <button class="w-full p-5 text-left cursor-pointer grid grid-cols-[1fr_auto] gap-4 items-center hover:bg-orange-50 transition-colors" onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('svg').classList.toggle('rotate-180')">
            <div>
                <h3 class="text-xl font-bold text-charcoal mb-1">Emails not sending</h3>
                <p class="text-charcoal/60 text-sm">No emails arriving in inbox despite test orders</p>
            </div>
            <svg class="w-8 h-8 text-charcoal/50 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
        </button>
        <div class="hidden border-t border-orange-500/30">
            <div class="p-6">
                <h4 class="font-bold text-charcoal mb-3">Solution</h4>
                <ul class="list-none p-0 space-y-2">
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-orange-500 rounded-full"></span>
                        Check Stores › Configuration › Advanced › System › Mail Sending Settings → Disable Email Communications = No
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-orange-500 rounded-full"></span>
                        Verify SMTP/ESP module credentials and encryption settings
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-orange-500 rounded-full"></span>
                        Ensure only one SMTP/ESP module is enabled
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-orange-500 rounded-full"></span>
                        Confirm Magento cron and system cron are running
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-orange-500 rounded-full"></span>
                        Review var/log/exception.log for error messages
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="bg-white shadow-md overflow-hidden border-t-4 border-orange-500">
        <button class="w-full p-5 text-left cursor-pointer grid grid-cols-[1fr_auto] gap-4 items-center hover:bg-orange-50 transition-colors" onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('svg').classList.toggle('rotate-180')">
            <div>
                <h3 class="text-xl font-bold text-charcoal mb-1">SPF failures</h3>
                <p class="text-charcoal/60 text-sm">Email authentication showing SPF=FAIL in headers</p>
            </div>
            <svg class="w-8 h-8 text-charcoal/50 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
        </button>
        <div class="hidden border-t border-orange-500/30">
            <div class="p-6">
                <h4 class="font-bold text-charcoal mb-3">Solution</h4>
                <ul class="list-none p-0 space-y-2">
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-orange-500 rounded-full"></span>
                        Use a single SPF TXT record at your domain root
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-orange-500 rounded-full"></span>
                        Include only providers you actively use for sending
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-orange-500 rounded-full"></span>
                        Keep total DNS lookups ≤10 across all includes
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-orange-500 rounded-full"></span>
                        Remove permissive "a" or "mx" mechanisms unless required
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="bg-white shadow-md overflow-hidden border-t-4 border-yellow-500">
        <button class="w-full p-5 text-left cursor-pointer grid grid-cols-[1fr_auto] gap-4 items-center hover:bg-yellow-50 transition-colors" onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('svg').classList.toggle('rotate-180')">
            <div>
                <h3 class="text-xl font-bold text-charcoal mb-1">DKIM failures</h3>
                <p class="text-charcoal/60 text-sm">Email authentication showing DKIM=FAIL in headers</p>
            </div>
            <svg class="w-8 h-8 text-charcoal/50 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
        </button>
        <div class="hidden border-t border-yellow-500/30">
            <div class="p-6">
                <h4 class="font-bold text-charcoal mb-3">Solution</h4>
                <ul class="list-none p-0 space-y-2">
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-yellow-500 rounded-full"></span>
                        Confirm DKIM selector names match ESP's instructions exactly
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-yellow-500 rounded-full"></span>
                        Use TXT or CNAME record type as specified by your ESP
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-yellow-500 rounded-full"></span>
                        Allow time for DNS propagation (up to 24-48 hours)
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-yellow-500 rounded-full"></span>
                        Test again and verify with dig or nslookup commands
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="bg-white shadow-md overflow-hidden border-t-4 border-yellow-500">
        <button class="w-full p-5 text-left cursor-pointer grid grid-cols-[1fr_auto] gap-4 items-center hover:bg-yellow-50 transition-colors" onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('svg').classList.toggle('rotate-180')">
            <div>
                <h3 class="text-xl font-bold text-charcoal mb-1">Redirect loops or multiple 301s</h3>
                <p class="text-charcoal/60 text-sm">Browser shows "too many redirects" error</p>
            </div>
            <svg class="w-8 h-8 text-charcoal/50 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
        </button>
        <div class="hidden border-t border-yellow-500/30">
            <div class="p-6">
                <h4 class="font-bold text-charcoal mb-3">Solution</h4>
                <ul class="list-none p-0 space-y-2">
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-yellow-500 rounded-full"></span>
                        Handle redirects at CDN/web server level only
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-yellow-500 rounded-full"></span>
                        Set Magento Auto-redirect to Base URL = No
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-yellow-500 rounded-full"></span>
                        Ensure Magento Base URLs exactly match canonical domain and protocol
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-yellow-500 rounded-full"></span>
                        Clear Magento caches after configuration changes
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="bg-white shadow-md overflow-hidden border-t-4 border-charcoal">
        <button class="w-full p-5 text-left cursor-pointer grid grid-cols-[1fr_auto] gap-4 items-center hover:bg-off-white transition-colors" onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('svg').classList.toggle('rotate-180')">
            <div>
                <h3 class="text-xl font-bold text-charcoal mb-1">Mixed content warnings</h3>
                <p class="text-charcoal/60 text-sm">Browser console showing insecure content on HTTPS pages</p>
            </div>
            <svg class="w-8 h-8 text-charcoal/50 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
        </button>
        <div class="hidden border-t border-charcoal/20">
            <div class="p-6">
                <h4 class="font-bold text-charcoal mb-3">Solution</h4>
                <ul class="list-none p-0 space-y-2">
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-charcoal rounded-full"></span>
                        Clear all Magento caches after changing Base URLs
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-charcoal rounded-full"></span>
                        Ensure all Base URLs use HTTPS protocol
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-charcoal rounded-full"></span>
                        Update hardcoded http:// URLs in custom themes or CMS blocks
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-charcoal rounded-full"></span>
                        Check third-party scripts and update to HTTPS versions
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="bg-white shadow-md overflow-hidden border-t-4 border-charcoal">
        <button class="w-full p-5 text-left cursor-pointer grid grid-cols-[1fr_auto] gap-4 items-center hover:bg-off-white transition-colors" onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('svg').classList.toggle('rotate-180')">
            <div>
                <h3 class="text-xl font-bold text-charcoal mb-1">Admin lockout after enabling secure admin</h3>
                <p class="text-charcoal/60 text-sm">Cannot access Magento Admin after Base URL changes</p>
            </div>
            <svg class="w-8 h-8 text-charcoal/50 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
        </button>
        <div class="hidden border-t border-charcoal/20">
            <div class="p-6">
                <h4 class="font-bold text-charcoal mb-3">Solution</h4>
                <ul class="list-none p-0 space-y-2">
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-charcoal rounded-full"></span>
                        Revert Base URLs via CLI or database (see Step 5 recovery procedures)
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-charcoal rounded-full"></span>
                        Use correct website scope code for multi-site installations
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-charcoal rounded-full"></span>
                        Recheck SSL certificate and web server configuration
                    </li>
                    <li class="relative pl-7 py-1 text-charcoal">
                        <span class="absolute left-1.5 top-3.5 w-2 h-2 bg-charcoal rounded-full"></span>
                        Clear caches after recovery: bin/magento cache:flush
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<h2 class="text-3xl font-bold text-charcoal mb-6">Related Resources</h2>
<ul class="space-y-3 pl-6 mb-8">
    <li class="relative hexagon-bullet pl-6 text-gray-700">
        <a href="https://postmaster.google.com/" class="text-orange-500 hover:underline">Google Postmaster Tools</a> – Monitor domain reputation and deliverability
    </li>
    <li class="relative hexagon-bullet pl-6 text-gray-700">
        <a href="https://www.ssllabs.com/ssltest/" class="text-orange-500 hover:underline">SSL Labs Server Test</a> – Test TLS configuration and certificate grade
    </li>
</ul>

<style>
/* Hexagon bullet marker for lists */
.hexagon-bullet::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0.5em;
    width: 9px;
    height: 9px;
    background-image: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 2L21 7V17L12 22L3 17V7L12 2Z' stroke='%23F26423' stroke-width='2.5' stroke-linejoin='miter'/%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
}

/* Step code styling for inline code paths */
.step-code {
    background: #2C2C2C;
    color: #F1BC1B;
    padding: 0.25rem 0.5rem;
    font-family: 'Courier New', monospace;
    font-size: 0.875rem;
}
</style>
